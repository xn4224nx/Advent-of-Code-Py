"""
Tests for the main script
"""

from main import WatchRecord
from datetime import datetime


def test_read_exp01():
    test = WatchRecord("./data/example_0.txt")

    assert test.guards == {10, 99}

    assert test.times == [
        datetime(1518, 11, 1, 0, 0),
        datetime(1518, 11, 1, 0, 5),
        datetime(1518, 11, 1, 0, 25),
        datetime(1518, 11, 1, 0, 30),
        datetime(1518, 11, 1, 0, 55),
        datetime(1518, 11, 1, 23, 58),
        datetime(1518, 11, 2, 0, 40),
        datetime(1518, 11, 2, 0, 50),
        datetime(1518, 11, 3, 0, 5),
        datetime(1518, 11, 3, 0, 24),
        datetime(1518, 11, 3, 0, 29),
        datetime(1518, 11, 4, 0, 2),
        datetime(1518, 11, 4, 0, 36),
        datetime(1518, 11, 4, 0, 46),
        datetime(1518, 11, 5, 0, 3),
        datetime(1518, 11, 5, 0, 45),
        datetime(1518, 11, 5, 0, 55),
    ]

    assert test.events == [
        10,
        "falls",
        "wakes",
        "falls",
        "wakes",
        99,
        "falls",
        "wakes",
        10,
        "falls",
        "wakes",
        99,
        "falls",
        "wakes",
        99,
        "falls",
        "wakes",
    ]


def test_guard_sleep_record_exp01():
    assert WatchRecord("./data/example_0.txt").guard_sleep_record(10) == [
        0,
        0,
        0,
        0,
        0,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        2,
        1,
        1,
        1,
        1,
        0,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        0,
        0,
        0,
        0,
        0,
    ]


def test_guard_sleep_record_exp02():
    assert WatchRecord("./data/example_0.txt").guard_sleep_record(90) == [
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        1,
        1,
        1,
        2,
        2,
        2,
        2,
        2,
        3,
        2,
        2,
        2,
        2,
        1,
        1,
        1,
        1,
        1,
        0,
        0,
        0,
        0,
        0,
    ]


def test_bypass_strat_01():
    assert WatchRecord("./data/example_0.txt").bypass_strat_01() == 240

def test_bypass_strat_02():
    assert WatchRecord("./data/example_1.txt").bypass_strat_01() == 240
