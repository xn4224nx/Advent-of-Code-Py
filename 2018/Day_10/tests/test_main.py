"""
Tests for the main script
"""

from main import Galaxy


def test_new_galaxy():
    test = Galaxy("./data/example_0.txt")
    assert len(test.s_position) == len(test.s_velocity)
    assert test.s_position == [
        (9, 1),
        (7, 0),
        (3, -2),
        (6, 10),
        (2, -4),
        (-6, 10),
        (1, 8),
        (1, 7),
        (-3, 11),
        (7, 6),
        (-2, 3),
        (-4, 3),
        (10, -3),
        (5, 11),
        (4, 7),
        (8, -2),
        (15, 0),
        (1, 6),
        (8, 9),
        (3, 3),
        (0, 5),
        (-2, 2),
        (5, -2),
        (1, 4),
        (-2, 7),
        (3, 6),
        (5, 0),
        (-6, 0),
        (5, 9),
        (14, 7),
        (-3, 6),
    ]
    assert test.s_velocity == [
        (0, 2),
        (-1, 0),
        (-1, 1),
        (-2, -1),
        (2, 2),
        (2, -2),
        (1, -1),
        (1, 0),
        (1, -2),
        (-1, -1),
        (1, 0),
        (2, 0),
        (-1, 1),
        (1, -2),
        (0, -1),
        (0, 1),
        (-2, 0),
        (1, 0),
        (0, -1),
        (-1, 1),
        (0, -1),
        (2, 0),
        (1, 2),
        (2, 1),
        (2, -2),
        (-1, -1),
        (1, 0),
        (2, 0),
        (1, -2),
        (-2, 0),
        (2, -1),
    ]


def test_visualise_galaxy():
    assert (
        str(Galaxy("./data/example_0.txt"))
        == """
........#.............
................#.....
.........#.#..#.......
......................
#..........#.#.......#
...............#......
....#.................
..#.#....#............
.......#..............
......#...............
...#...#.#...#........
....#..#..#.........#.
.......#..............
...........#..#.......
#...........#.........
...#.......#..........
"""
    )


def test_advance_time_1s():
    test = Galaxy("./data/example_0.txt")
    test.advance_time()
    assert (
        str(test)
        == """
......................
......................
..........#....#......
........#.....#.......
..#.........#......#..
......................
......#...............
....##.........#......
......#.#.............
.....##.##..#.........
........#.#...........
........#...#.....#...
..#...........#.......
....#.....#.#.........
......................
......................
"""
    )


def test_advance_time_2s():
    test = Galaxy("./data/example_0.txt")
    test.advance_time()
    test.advance_time()
    assert (
        str(test)
        == """
......................
......................
......................
..............#.......
....#..#...####..#....
......................
........#....#........
......#.#.............
.......#...#..........
.......#..#..#.#......
....#....#.#..........
.....#...#...##.#.....
........#.............
......................
......................
......................
"""
    )


def test_advance_time_3s():
    test = Galaxy("./data/example_0.txt")
    test.advance_time()
    test.advance_time()
    test.advance_time()
    assert (
        str(test)
        == """
......................
......................
......................
......................
......#...#..###......
......#...#...#.......
......#...#...#.......
......#####...#.......
......#...#...#.......
......#...#...#.......
......#...#...#.......
......#...#..###......
......................
......................
......................
......................
"""
    )


def test_advance_time_4s():
    test = Galaxy("./data/example_0.txt")
    test.advance_time()
    test.advance_time()
    test.advance_time()
    test.advance_time()
    assert (
        str(test)
        == """
......................
......................
......................
............#.........
........##...#.#......
......#.....#..#......
.....#..##.##.#.......
.......##.#....#......
...........#....#.....
..............#.......
....#......#...#......
.....#.....##.........
...............#......
...............#......
......................
......................
"""
    )
